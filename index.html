<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª–ª—ã –∏ –ú–∏–Ω—ã + –°—Ç–∞–≤–∫–∏</title>
  <style>
    /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
    @keyframes fadeInPage {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('background.png') no-repeat center center fixed;
      background-size: cover;
      color: white;
      animation: fadeInPage 1s ease forwards;
    }
    nav {
      background: #4a148c;
      padding: 15px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      animation: fadeInPage 1.2s ease forwards;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #a855f7;
      box-shadow: 0 0 20px #a855f7;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      animation: fadeInPage 1.4s ease forwards;
    }
    h1 {
      margin: 20px 0;
    }
    #game-board {
      display: grid;
      grid-template-columns: repeat(5, 80px);
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
      animation: fadeInPage 1.6s ease forwards;
    }
    .cell {
      width: 80px;
      height: 80px;
      background: url('crystal-icon.png') center/contain no-repeat;
      border: 2px solid #673ab7;
      border-radius: 10px;
      cursor: pointer;
      user-select: none;
      transition: transform 0.2s ease;
      animation: fadeInPage 1.8s ease forwards;
    }
    .cell:hover:not(.revealed) {
      transform: scale(1.1);
      box-shadow: 0 0 10px #a855f7;
    }
    .cell.revealed {
      background: none;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: revealCellAnim 0.3s ease forwards;
    }
    @keyframes revealCellAnim {
      from {
        transform: scale(0.6);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
    .cell img {
      width: 60%;
      height: 60%;
      animation: fadeIn 0.3s ease forwards;
    }
    @keyframes fadeIn {
      from {opacity: 0;}
      to {opacity: 1;}
    }
    .cell.bomb {
      background-color: #8e24aa;
      animation: bombFlash 0.6s ease infinite alternate;
    }
    @keyframes bombFlash {
      0% { box-shadow: 0 0 8px 2px #ff1744; }
      100% { box-shadow: 0 0 20px 5px #f50057; }
    }
    .cell.safe {
      background-color: none;
    }
    #controls {
      margin: 15px 0;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      animation: fadeInPage 2s ease forwards;
    }
#controls input, #controls select {
  padding: 10px 14px;
  font-size: 16px;
  border-radius: 8px;
  border: 2px solid #673ab7;
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
  backdrop-filter: blur(4px);
  transition: all 0.3s ease;
  box-shadow: 0 0 10px transparent;
  min-width: 160px;
}

#controls input::placeholder {
  color: #cccccc;
}

#controls input:focus, #controls select:focus {
  border-color: #a855f7;
  box-shadow: 0 0 10px #a855f7;
  outline: none;
  background-color: rgba(255, 255, 255, 0.15);
}

#controls select {
  appearance: none;
  background-image: url('data:image/svg+xml;utf8,<svg fill="white" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 10px center;
  background-size: 18px 18px;
  padding-right: 34px;
}

#controls select, #controls option {
  color: white;
  background-color: #1e1e2f; /* –¢—ë–º–Ω–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π/—Ç—ë–º–Ω—ã–π —Ñ–æ–Ω */
}

#controls option {
  padding: 10px;
  font-size: 16px;
}

    #controls button {
      padding: 8px 16px;
      background-color: #a855f7;
      border: none;
      color: white;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #controls button:hover {
      background-color: #9333ea;
    }
    #balance, #coef, #current-win {
      margin-top: 10px;
      font-size: 18px;
      animation: fadeInPage 2.2s ease forwards;
    }
    #message-box {
      position: fixed;
      top: 20px;
      right: 20px;
      max-width: 320px;
      background-color: rgba(0, 0, 0, 0.85);
      border: 2px solid #a855f7;
      border-radius: 10px;
      padding: 15px 40px 15px 15px;
      font-size: 18px;
      color: white;
      box-shadow: 0 0 15px #a855f7;
      display: none;
      animation: fadeInMessage 0.5s ease forwards;
      z-index: 1000;
    }
    #message-box.show {
      display: block;
    }
    #message-box .close-btn {
      position: absolute;
      top: 5px;
      right: 8px;
      background: transparent;
      border: none;
      color: white;
      font-size: 20px;
      cursor: pointer;
      font-weight: bold;
      line-height: 1;
      user-select: none;
    }
    @keyframes fadeInMessage {
      from {opacity: 0;}
      to {opacity: 1;}
    }

    #skin-panel {
  max-width: 800px;
  margin: 20px auto;
  background: rgba(0, 0, 0, 0.75);
  border: 2px solid #a855f7;
  border-radius: 10px;
  padding: 20px;
  color: white;
  box-shadow: 0 0 15px #a855f7;
  text-align: center;
}

.skin-item {
  display: inline-block;
  margin: 10px;
  padding: 10px;
  border: 2px solid #673ab7;
  border-radius: 10px;
  background: rgba(255,255,255,0.05);
  width: 150px;
  vertical-align: top;
}

.skin-item img {
  width: 100px;
  height: 100px;
}

.skin-item button {
  margin-top: 10px;
  padding: 6px 12px;
  background-color: #a855f7;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
}

.skin-item img {
  width: 64px;       /* –∏–ª–∏ 48px ‚Äî –ø–æ –∂–µ–ª–∞–Ω–∏—é */
  height: auto;      /* —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
  display: block;
  margin: 0 auto;
}

  </style>
</head>
<body>
  <nav>üéÆ –ö—Ä–∏—Å—Ç–∞–ª–ª—ã –∏ –ú–∏–Ω—ã ‚Äî –ò–≥—Ä–∞ –Ω–∞ —É–¥–∞—á—É!</nav>
  <div class="container">
    <h1>–°—Ç–∞–≤—å –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π</h1>
    <div id="balance">–ë–∞–ª–∞–Ω—Å: 100 üí∞</div>

<div id="skin-panel">
  <h2>–í—ã–±–æ—Ä —Å–∫–∏–Ω–∞</h2>
  <div id="skins-list"></div>
</div>


    <div id="controls">
      <input type="text" id="bet" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Ç–∞–≤–∫—É" min="1" />
      <select id="mine-count">
        <option value="1">1 –º–∏–Ω–∞</option>
        <option value="3" selected>3 –º–∏–Ω—ã</option>
        <option value="5">5 –º–∏–Ω</option>
        <option value="7">7 –º–∏–Ω</option>
      </select>
      <button onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
      <button onclick="collectWin()">–ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à</button>
      <button onclick="watchAd()">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É</button>
      <button onclick="resetGame()">–°–±—Ä–æ—Å –∏–≥—Ä—ã</button>
    </div>

    <div id="coef">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: 1.00x</div>
    <div id="current-win">–¢–µ–∫—É—â–∏–π –≤—ã–∏–≥—Ä—ã—à: 0 üí∞</div>
    <div id="game-board"></div>
  </div>

  <div id="message-box">
    <button class="close-btn" onclick="hideMessage()">√ó</button>
    <span id="message-text"></span>
  </div>

  <script>
    document.getElementById('bet').addEventListener('input', function () {
  this.value = this.value.replace(/[^\d]/g, '');
});
    const coefficientTable = {
      1: [1.05, 1.10, 1.16, 1.22, 1.30, 1.38, 1.47, 1.57, 1.68, 1.80, 1.93, 2.07, 2.22, 2.38, 2.55, 2.73, 2.92, 3.12, 3.33, 3.55, 3.78, 4.02, 4.27, 4.53, 4.80],
      3: [1.09, 1.24, 1.43, 1.65, 1.91, 2.21, 2.56, 2.96, 3.42, 3.95, 4.56, 5.26, 6.06, 6.97, 8.00, 9.17, 10.50, 12.00, 13.70, 15.62, 17.78, 20.21],
      5: [1.15, 1.34, 1.57, 1.84, 2.17, 2.56, 3.02, 3.56, 4.21, 4.97, 5.87, 6.93, 8.17, 9.63, 11.33, 13.33, 15.67, 18.40, 21.60, 25.35],
      7: [1.20, 1.43, 1.70, 2.02, 2.41, 2.88, 3.45, 4.14, 4.97, 5.97, 7.18, 8.65, 10.42, 12.56, 15.14, 18.23, 21.94, 26.37]
    };

    let boardSize = 5;
    let totalCells = boardSize * boardSize;
    let cells = [];
    let bombs = new Set();
    let revealedCount = 0;
    let balance = 100;
    let currentBet = 0;
    let coefficient = 1.0;
    let gameActive = false;
    let currentMineCount = 3;

    const gameBoard = document.getElementById('game-board');
    const balanceDisplay = document.getElementById('balance');
    const coefDisplay = document.getElementById('coef');
    const winDisplay = document.getElementById('current-win');
    const messageBox = document.getElementById('message-box');
    const messageText = document.getElementById('message-text');
    let messageTimeout;

    function updateUI() {
      coefDisplay.textContent = `–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: ${coefficient.toFixed(2)}x`;
      winDisplay.textContent = `–¢–µ–∫—É—â–∏–π –≤—ã–∏–≥—Ä—ã—à: ${(currentBet * coefficient).toFixed(2)} üí∞`;
      balanceDisplay.textContent = `–ë–∞–ª–∞–Ω—Å: ${balance.toFixed(2)} üí∞`;
    }

    function startGame() {
      const betInput = document.getElementById('bet');
      const mineSelect = document.getElementById('mine-count');
      const bet = parseInt(betInput.value);
      const mineCount = parseInt(mineSelect.value);

      if (!bet || bet < 1 || bet > balance) {
        showMessage("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç–∞–≤–∫—É");
        return;
      }

      currentMineCount = mineCount;
      bombs = new Set();
      cells = [];
      revealedCount = 0;
      gameBoard.innerHTML = '';
      gameActive = true;
      coefficient = 1.0;
      currentBet = bet;
      balance -= bet;
      hideMessage();

      while (bombs.size < mineCount) {
        bombs.add(Math.floor(Math.random() * totalCells));
      }

      for (let i = 0; i < totalCells; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';
        cell.onclick = () => revealCell(i);
        gameBoard.appendChild(cell);
        cells.push(cell);
      }

      updateUI();
    }

function revealCell(index) {
  if (!gameActive) return;
  const cell = cells[index];
  if (cell.classList.contains('revealed')) return;

  cell.classList.add('revealed');
  cell.innerHTML = '';

  if (bombs.has(index)) {
  cell.classList.add('bomb');
  const img = document.createElement('img');
  img.src = getSelectedBombIcon();
  cell.appendChild(img);
    gameActive = false;
    currentBet = 0;
    revealAllCells();
    showMessage("üí• –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
  } else {
    cell.classList.add('safe');
    const img = document.createElement('img');
    img.src = getSelectedCrystalIcon();  // <- –ó–¥–µ—Å—å –º–µ–Ω—è–µ–º –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–∫–∏–Ω
    cell.appendChild(img);
    revealedCount++;
    if (revealedCount === totalCells - currentMineCount) {
      const winnings = currentBet * coefficient;
      balance += winnings;
      updateUI();
      showMessage(`üèÜ –ü–æ–±–µ–¥–∞! –í—ã –æ—Ç–∫—Ä—ã–ª–∏ –≤—Å–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–ª–µ—Ç–∫–∏ –∏ –≤—ã–∏–≥—Ä–∞–ª–∏ ${winnings.toFixed(2)} üí∞!`);
      currentBet = 0;
      gameActive = false;
      revealAllCells();
    }
    const table = coefficientTable[currentMineCount];
    coefficient = table[Math.min(revealedCount - 1, table.length - 1)] || coefficient;
    updateUI();
  }
}

function revealAllCells() {
  cells.forEach((cell, index) => {
    if (!cell.classList.contains('revealed')) {
      cell.classList.add('revealed');
      cell.innerHTML = '';
      if (bombs.has(index)) {
        cell.classList.add('bomb');
        const img = document.createElement('img');
  img.src = getSelectedBombIcon();
        cell.appendChild(img);
      } else {
        cell.classList.add('safe');
        const img = document.createElement('img');
  img.src = getSelectedCrystalIcon();
        cell.appendChild(img);
      }
    }
  });
}


function collectWin() {
  if (!gameActive || currentBet === 0) return;
  const winnings = currentBet * coefficient;
  balance += winnings;
  revealAllCells(); // üëà –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–∏–Ω
  gameActive = false;
  showMessage(`üéâ –í—ã –∑–∞–±—Ä–∞–ª–∏ ${winnings.toFixed(2)} üí∞!`);
  currentBet = 0;
  updateUI();
}

function revealAllCells() {
  cells.forEach((cell, index) => {
    if (!cell.classList.contains('revealed')) {
      cell.classList.add('revealed');
      cell.innerHTML = '';
      if (bombs.has(index)) {
        cell.classList.add('bomb');
        const img = document.createElement('img');
        img.src = getSelectedBombIcon();  // <== –¥–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–Ω–∞ –¥–ª—è –º–∏–Ω—ã
        cell.appendChild(img);
      } else {
        cell.classList.add('safe');
        const img = document.createElement('img');
        img.src = getSelectedCrystalIcon();
        cell.appendChild(img);
      }
    }
  });
}

function getSelectedBombIcon() {
  const skin = skins.find(s => s.id === selectedSkinId);
  // –ú–æ–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ–±—ä–µ–∫—Ç —Å–∫–∏–Ω–∞ –ø–æ–ª–µ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –º–∏–Ω—ã
  // –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Å–µ–π—á–∞—Å –≤–µ—Ä–Ω—ë–º –ø—Ä–æ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –º–∏–Ω—ã, –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å
  return skin?.bomb || 'bomb.png';
}

function resetGame() {
  gameActive = false;
  currentBet = 0;
  coefficient = 1.0;
  bombs.clear();
  cells = [];
  revealedCount = 0;
  currentMineCount = 3;
  gameBoard.innerHTML = '';
  updateUI();
  hideMessage();
}

    
    function showMessage(msg) {
      clearTimeout(messageTimeout);
      messageText.textContent = msg;
      messageBox.classList.add('show');
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
      messageTimeout = setTimeout(() => {
        hideMessage();
      }, 5000);
    }

    function hideMessage() {
      messageBox.classList.remove('show');
      clearTimeout(messageTimeout);
    }

    function watchAd() {
      balance += 10;
      showMessage("üì∫ –í—ã –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∏ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∏–ª–∏ 10 üí∞!");
      updateUI();
    }

    updateUI();

const skins = [
  { id: 'default', name: '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π', price: 0, crystal: 'crystal.png', bomb: 'bomb.png', bought: true, 
    imgWidth: 50, imgHeight: 50, 
    bgColor: '#4a148c', 
    navBgColor: '#4a148c', 
    buttonBgColor: '#a855f7',
    bodyBgImage: "url('background.png')" },
  { id: 'green', name: '–ó–µ–ª—ë–Ω—ã–π', price: 50, crystal: 'cristal-green.png', bomb: 'bomb-green.png', bought: false, 
    imgWidth: 80, imgHeight: 50,
    bgColor: '#1b5e20',
    navBgColor: '#2e7d32',
    buttonBgColor: '#43a047',
    bodyBgImage: "url('background-green.png')" },
  { id: 'red', name: '–ö—Ä–∞—Å–Ω—ã–π', price: 75, crystal: 'cristal-red.png', bomb: 'bomb-red.png', bought: false,
    imgWidth: 80, imgHeight: 50,
    bgColor: '#b71c1c',
    navBgColor: '#c62828',
    buttonBgColor: '#e53935',
    bodyBgImage: "url('background-red.png')" }
];

window.onload = () => {
  const skin = skins.find(s => s.id === selectedSkinId);
  if (skin) applySkinDesign(skin);
  renderSkins();
  updateUI();
};


function applySkinDesign(skin) {
  document.body.style.backgroundImage = skin.bodyBgImage || '';
  document.querySelector('nav').style.backgroundColor = skin.navBgColor || '';
  
  // –ò–∑–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –∫–Ω–æ–ø–æ–∫
  document.querySelectorAll('#controls button, #skin-panel button').forEach(btn => {
    btn.style.backgroundColor = skin.buttonBgColor || '';
    btn.style.borderColor = skin.buttonBgColor || '';
  });
  
  // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Ç–µ–∫—Å—Ç–∞ –∏ –¥—Ä.
  document.querySelector('.container').style.borderColor = skin.bgColor || '';
  document.querySelector('.container').style.boxShadow = `0 0 20px ${skin.bgColor || '#a855f7'}`;
  document.getElementById('skin-panel').style.borderColor = skin.bgColor || '';
  document.getElementById('skin-panel').style.boxShadow = `0 0 15px ${skin.bgColor || '#a855f7'}`;
}


function getSelectedBombIcon() {
  const skin = skins.find(s => s.id === selectedSkinId);
  return skin?.bomb || 'bomb.png';
}

let selectedSkinId = 'default';

function renderSkins() {
  const container = document.getElementById('skins-list');
  container.innerHTML = '';
  skins.forEach(skin => {
    const item = document.createElement('div');
    item.className = 'skin-item';
    item.innerHTML = `
      <img src="${skin.crystal}" alt="${skin.name}" 
        style="width: ${skin.imgWidth}px; height: ${skin.imgHeight}px; display: block; margin: 0 auto;" />
      <div><strong>${skin.name}</strong></div>
      <div>–¶–µ–Ω–∞: ${skin.price} üí∞</div>
      <button onclick="handleSkinAction('${skin.id}')">
        ${skin.bought ? (skin.id === selectedSkinId ? '–í—ã–±—Ä–∞–Ω' : '–í—ã–±—Ä–∞—Ç—å') : '–ö—É–ø–∏—Ç—å'}
      </button>
    `;
    container.appendChild(item);
  });
}

function handleSkinAction(id) {
  const skin = skins.find(s => s.id === id);
  if (!skin.bought) {
    if (balance >= skin.price) {
      balance -= skin.price;
      skin.bought = true;
      selectedSkinId = skin.id;
      applySkinDesign(skin);
      showMessage(`‚úÖ –ö—É–ø–ª–µ–Ω —Å–∫–∏–Ω "${skin.name}"`);
      updateUI();
    } else {
      showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
      return;
    }
  } else {
    selectedSkinId = skin.id;
    applySkinDesign(skin);
  }
  renderSkins();
}



function getSelectedCrystalIcon() {
  const skin = skins.find(s => s.id === selectedSkinId);
  return skin?.crystal || 'crystal.png';
}

  renderSkins();
  </script>
</body>
</html>